<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Think Track</title>
   <link rel="stylesheet" href="style.css">
</head>
<body>
   <div class="container">
       <div class="header">
           <h1>üìã Think Track</h1>
           <p>Create and navigate interactive flowcharts</p>
       </div>

       <div class="mode-selector">
           <button class="mode-btn active" onclick="switchMode('create')">‚úèÔ∏è Create</button>
           <button class="mode-btn" onclick="switchMode('navigate')">üîÅ Navigate</button>
       </div>

       <!-- Create Mode -->
       <div id="create-mode">
           <div class="main-layout">
               <!-- Left Sidebar - Form -->
               <div class="sidebar">
                   <div class="panel form-panel">
                       <h2>üìù Add New Node</h2>
                       <form id="node-form">
                           <div class="form-group">
                               <label for="node-id">Node ID:</label>
                               <input type="text" id="node-id" placeholder="e.g., start, check-id, end" required>
                           </div>
                           
                           <div class="form-group">
                               <label for="node-instruction">Instruction Text:</label>
                               <textarea id="node-instruction" placeholder="e.g., Ask the customer for their ID" required></textarea>
                           </div>
                           
                           <div class="form-group">
                               <label for="node-image">Optional Image:</label>
                               <div class="file-input-wrapper">
                                   <input type="file" id="node-image" accept="image/*" onchange="previewImage(event)">
                                   <label for="node-image" class="file-input-label">üì∑ Add Image</label>
                               </div>
                               <div id="image-preview" class="image-preview hidden">
                                   <img id="preview-img" alt="Preview">
                                   <button type="button" class="btn btn-danger" onclick="removeImage()" style="margin-top: 10px;">Remove Image</button>
                               </div>
                           </div>
                           
                           <div class="form-group">
                               <label>Options:</label>
                               <div class="options-container" id="options-container">
                                   <div class="option-item">
                                       <input type="text" placeholder="Option label (e.g., Yes)" required>
                                       <input type="text" placeholder="Next node ID (e.g., verify-id)" required>
                                       <button type="button" class="remove-option" onclick="removeOption(this)">√ó</button>
                                   </div>
                               </div>
                               <button type="button" class="btn btn-secondary" onclick="addOption()">+ Add Option</button>
                           </div>
                           
                           <button type="submit" class="btn btn-primary btn-large" id="submit-btn">Add Node</button>
                           <button type="button" class="btn btn-secondary btn-large hidden" id="cancel-edit-btn" onclick="cancelEdit()">Cancel Edit</button>
                       </form>
                   </div>
               </div>

               <!-- Main Content Area -->
               <div class="main-content">
                   <div class="panel flowchart-panel">
                       <div class="flowchart-header">
                           <div class="flowchart-title">üìä Current Flowchart</div>
                           <div class="flowchart-stats" id="flowchart-stats">0 nodes</div>
                       </div>
                       
                       <!-- Search Bar -->
                       <div class="search-container" id="search-container">
                           <div class="search-input-wrapper">
                               <input type="text" id="search-input" placeholder="üîç Search nodes by ID or instruction text..." />
                               <button class="search-clear-btn" onclick="clearSearch()" title="Clear search">√ó</button>
                           </div>
                           <div class="search-results" id="search-results"></div>
                       </div>
                       
                       <!-- Flowchart Canvas for Tree Visualization -->
                       <div id="flowchart-canvas">
                           <div id="flowchart-content">
                               <div class="empty-state">
                                   <div class="empty-state-icon">üìã</div>
                                   <div class="empty-state-text">No nodes created yet</div>
                                   <div class="empty-state-subtext">Start by adding your first node using the form on the left</div>
                               </div>
                           </div>
                       </div>

                       <div class="flowchart-actions">
                           <button class="btn btn-success" onclick="exportFlowchart()">üíæ Export JSON</button>
                           <div class="file-input-wrapper">
                               <input type="file" id="import-file" accept=".json" onchange="importFlowchart(event)">
                               <label for="import-file" class="file-input-label">üìÅ Import JSON</label>
                           </div>
                           <div class="example-dropdown">
                               <button class="example-dropdown-btn" onclick="toggleExampleDropdown()">
                                   üéÆ Load Example
                                   <span id="dropdown-arrow">‚ñº</span>
                               </button>
                               <div class="example-dropdown-content" id="example-dropdown">
                                   <div class="example-option" onclick="loadExample('should-i-eat-it')">
                                       üç± Should I Eat It?
                                   </div>
                               </div>
                           </div>
                           <button class="btn btn-danger" onclick="clearFlowchart()">üóëÔ∏è Clear All</button>
                       </div>
                   </div>
               </div>
           </div>
       </div>

       <!-- Navigate Mode -->
       <div id="navigate-mode" class="hidden">
           <div class="panel">
               <div id="navigation-content">
                   <p style="text-align: center; color: #666;">No flowchart loaded. Please create nodes or import a flowchart.</p>
               </div>
           </div>
       </div>
   </div>
   <script src="main.js"></script>
   
</body>
</html>